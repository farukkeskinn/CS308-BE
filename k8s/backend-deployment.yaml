apiVersion: apps/v1
kind: Deployment
metadata: {name: backend}
spec:
  replicas: 1
  selector: {matchLabels: {app: backend}}
  template:
    metadata: {labels: {app: backend}}
    spec:
      containers:
        - name: backend
          image: backend-service:latest
          imagePullPolicy: IfNotPresent # ‚Üê change if needed
          envFrom:
            - configMapRef: {name: backend-config}
            - secretRef:    {name: mysql-secret}
          ports: [{containerPort: 8080}]
          readinessProbe:
            tcpSocket:
              port: 8080
            initialDelaySeconds: 10
            periodSeconds: 5
---
apiVersion: v1
kind: Service
metadata: {name: backend}
spec:
  selector: {app: backend}
  ports:
    - {port: 8080, targetPort: 8080, name: http}
  type: ClusterIP
